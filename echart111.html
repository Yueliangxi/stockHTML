<!DOCTYPE html>
<!-- 为英文，下面为中文 -->
<!-- <html lang="en"> -->
<html>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <!-- 引入 Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- 引入 jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
      /* 浏览器全屏状态下背景颜色设置：main是div里面的选择器 */
      #main:-webkit-full-screen {
        background-color: #056197 !important;
      }
      #main:-moz-full-screen {
        background-color: #056197 !important;
      }
      #main:-ms-fullscreen {
        background-color: #056197 !important;
      }
      #main:fullscreen{
        background-color: #056197 !important;
      }
      </style>
</head>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">

<body>

  <!-- 輸入框和確認按鈕 -->
  <div class="container mt-3">
    <div class="row">
        <!-- Input field -->
        <div class="col-md-10">
            <input type="text" class="form-control" id="stockCodeInput" placeholder="输入股票代码(example: HK.00700), 只支持港股">
        </div>
        
        <!-- Confirm button -->
        <div class="col-md-2">
            <button class="btn btn-primary w-100" id="confirmButton">确认</button>
        </div>
    </div>
  </div>

  <br>

  <!-- 为ECharts准备一个具备大小（宽高）的Dom -->
  <!-- <div id="main" style="width: 1200px; height: 600px;"></div> -->
  <div class="container-fluid">
    <div id="main" style="width: 100%; height: 600px;"></div>
  </div>

</body>
<script src="
https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js
"></script>
<script>

  $(document).ready(function() {
      // 点击事件监听器
      $("#confirmButton").click(function() {
          // 获取输入框的值
          var stockCode = $("#stockCodeInput").val();
          stockCode = stockCode.toUpperCase();
          $("#stockCodeInput").val(stockCode);

          // 请求的数据
          let data = {
              "stockCode": stockCode
          };

          // 使用 jQuery 的 Ajax 发送 POST 请求
          $.ajax({
              url: 'https://4romz0l969.execute-api.ap-southeast-2.amazonaws.com/search/stock',
              type: 'POST',
              data: JSON.stringify(data), 
              contentType: 'application/json',
              success: function(response) {
                  console.log(response);
                  // Update the ECharts with the data from the response
                  if (response.error) {
                    alert('Error: ' + response.error);
                } else {
                    // Update the ECharts with the data from the response
                    updateChart(response);
                    alert('Data sent successfully.');
                }
              },
              error: function(jqXHR, textStatus, errorThrown) {
                console.log(jqXHR, textStatus, errorThrown);
                if (jqXHR.status === 404) {
                    alert('Stock code not found.');
                } else {
                    alert('Error sending data: ' + errorThrown);
                }
            }
          });
      });
  });



/*基于准备好的dom，初始化echarts实例*/
 var myChart = echarts.init(document.getElementById('main'));
 
 // 数据意义：开盘(open)，收盘(close)，最低(lowest)，最高(highest)

 window.addEventListener('resize', function() {
    myChart.resize();
});

 var data0 = splitData([
    [
        "2023-03-14 00:00:00",
        339.0,
        339.2,
        336.6,
        350.2,
        196.22
    ],
    [
        "2023-03-15 00:00:00",
        348.0,
        342.2,
        341.8,
        351.4,
        196.25
    ],
    [
        "2023-03-16 00:00:00",
        338.0,
        333.6,
        331.4,
        342.6,
        196.29
    ],
    [
        "2023-03-17 00:00:00",
        338.4,
        337.0,
        337.0,
        344.2,
        196.32
    ],
    [
        "2023-03-20 00:00:00",
        334.6,
        332.4,
        328.6,
        337.0,
        196.35
    ],
    [
        "2023-03-21 00:00:00",
        332.4,
        341.2,
        328.0,
        344.6,
        196.39
    ],
    [
        "2023-03-22 00:00:00",
        344.6,
        344.8,
        343.8,
        351.2,
        196.42
    ],
    [
        "2023-03-23 00:00:00",
        351.2,
        373.2,
        350.0,
        373.4,
        196.46
    ],
    [
        "2023-03-24 00:00:00",
        377.6,
        374.4,
        372.4,
        385.0,
        196.5
    ],
    [
        "2023-03-27 00:00:00",
        372.2,
        360.4,
        360.2,
        375.6,
        196.54
    ],
    [
        "2023-03-28 00:00:00",
        364.4,
        375.8,
        364.4,
        378.6,
        196.57
    ],
    [
        "2023-03-29 00:00:00",
        394.6,
        382.4,
        379.6,
        395.2,
        196.61
    ],
    [
        "2023-03-30 00:00:00",
        387.4,
        382.6,
        377.8,
        387.4,
        196.65
    ],
    [
        "2023-03-31 00:00:00",
        387.6,
        383.4,
        381.6,
        391.6,
        196.69
    ],
    [
        "2023-04-03 00:00:00",
        386.6,
        385.8,
        382.6,
        388.6,
        196.73
    ],
    [
        "2023-04-04 00:00:00",
        380.8,
        382.6,
        379.8,
        386.2,
        196.77
    ],
    [
        "2023-04-06 00:00:00",
        381.6,
        383.0,
        378.2,
        385.2,
        196.81
    ],
    [
        "2023-04-11 00:00:00",
        386.6,
        374.2,
        369.0,
        387.6,
        196.85
    ],
    [
        "2023-04-12 00:00:00",
        368.6,
        354.8,
        351.8,
        369.2,
        196.88
    ],
    [
        "2023-04-13 00:00:00",
        347.6,
        360.8,
        345.0,
        361.6,
        196.92
    ],
    [
        "2023-04-14 00:00:00",
        364.0,
        363.0,
        356.6,
        365.8,
        196.96
    ],
    [
        "2023-04-17 00:00:00",
        362.2,
        368.6,
        358.0,
        369.6,
        196.99
    ],
    [
        "2023-04-18 00:00:00",
        368.6,
        363.0,
        358.6,
        368.6,
        197.03
    ],
    [
        "2023-04-19 00:00:00",
        360.6,
        354.8,
        352.6,
        360.6,
        197.07
    ],
    [
        "2023-04-20 00:00:00",
        354.8,
        354.6,
        353.2,
        359.2,
        197.1
    ],
    [
        "2023-04-21 00:00:00",
        350.8,
        346.8,
        343.6,
        353.2,
        197.14
    ],
    [
        "2023-04-24 00:00:00",
        344.8,
        342.6,
        335.6,
        348.4,
        197.17
    ],
    [
        "2023-04-25 00:00:00",
        339.2,
        336.0,
        330.6,
        339.2,
        197.21
    ],
    [
        "2023-04-26 00:00:00",
        333.4,
        345.8,
        333.0,
        349.8,
        197.24
    ],
    [
        "2023-04-27 00:00:00",
        344.6,
        342.6,
        337.8,
        345.6,
        197.27
    ],
    [
        "2023-04-28 00:00:00",
        345.6,
        342.0,
        341.4,
        352.4,
        197.31
    ],
    [
        "2023-05-02 00:00:00",
        349.6,
        343.4,
        339.8,
        352.0,
        197.34
    ],
    [
        "2023-05-03 00:00:00",
        337.2,
        337.0,
        333.8,
        340.6,
        197.38
    ],
    [
        "2023-05-04 00:00:00",
        338.2,
        335.4,
        330.6,
        341.2,
        197.41
    ],
    [
        "2023-05-05 00:00:00",
        341.0,
        340.4,
        335.8,
        344.6,
        197.44
    ],
    [
        "2023-05-08 00:00:00",
        341.6,
        338.4,
        335.2,
        345.2,
        197.48
    ],
    [
        "2023-05-09 00:00:00",
        335.8,
        326.0,
        325.8,
        336.8,
        197.51
    ],
    [
        "2023-05-10 00:00:00",
        324.6,
        327.2,
        323.0,
        329.0,
        197.54
    ],
    [
        "2023-05-11 00:00:00",
        330.2,
        324.0,
        320.8,
        331.2,
        197.57
    ],
    [
        "2023-05-12 00:00:00",
        329.4,
        325.8,
        324.6,
        332.0,
        197.6
    ],
    [
        "2023-05-15 00:00:00",
        322.6,
        338.6,
        322.6,
        342.0,
        197.64
    ],
    [
        "2023-05-16 00:00:00",
        345.6,
        342.4,
        340.4,
        345.6,
        197.67
    ],
    [
        "2023-05-17 00:00:00",
        343.6,
        340.4,
        338.8,
        347.4,
        197.7
    ],
    [
        "2023-05-18 00:00:00",
        338.8,
        337.4,
        327.0,
        340.6,
        197.74
    ],
    [
        "2023-05-19 00:00:00",
        333.0,
        333.2,
        329.0,
        335.8,
        200.17
    ],
    [
        "2023-05-22 00:00:00",
        331.8,
        340.2,
        328.2,
        344.4,
        200.2
    ],
    [
        "2023-05-23 00:00:00",
        345.2,
        335.6,
        334.0,
        345.6,
        200.23
    ],
    [
        "2023-05-24 00:00:00",
        331.2,
        332.4,
        330.6,
        336.8,
        200.27
    ],
    [
        "2023-05-25 00:00:00",
        329.8,
        322.4,
        318.4,
        330.6,
        200.3
    ],
    [
        "2023-05-29 00:00:00",
        327.2,
        313.2,
        311.2,
        327.2,
        200.32
    ],
    [
        "2023-05-30 00:00:00",
        311.8,
        316.2,
        307.6,
        318.2,
        200.35
    ],
    [
        "2023-05-31 00:00:00",
        314.6,
        310.6,
        306.0,
        314.6,
        200.38
    ],
    [
        "2023-06-01 00:00:00",
        312.6,
        315.4,
        311.2,
        323.4,
        200.41
    ],
    [
        "2023-06-02 00:00:00",
        327.6,
        334.2,
        323.4,
        334.2,
        200.44
    ],
    [
        "2023-06-05 00:00:00",
        336.0,
        338.2,
        330.0,
        338.8,
        200.48
    ],
    [
        "2023-06-06 00:00:00",
        338.0,
        331.2,
        329.0,
        339.2,
        200.51
    ],
    [
        "2023-06-07 00:00:00",
        340.0,
        335.6,
        334.6,
        340.0,
        200.54
    ],
    [
        "2023-06-08 00:00:00",
        332.8,
        334.8,
        328.2,
        335.2,
        200.57
    ],
    [
        "2023-06-09 00:00:00",
        336.4,
        336.0,
        333.8,
        340.0,
        200.6
    ],
    [
        "2023-06-12 00:00:00",
        340.0,
        338.4,
        334.2,
        340.0,
        200.64
    ],
    [
        "2023-06-13 00:00:00",
        339.6,
        344.8,
        338.0,
        348.4,
        200.67
    ],
    [
        "2023-06-14 00:00:00",
        346.6,
        345.6,
        344.0,
        353.4,
        200.7
    ],
    [
        "2023-06-15 00:00:00",
        353.0,
        355.0,
        348.0,
        355.0,
        200.74
    ],
    [
        "2023-06-16 00:00:00",
        359.0,
        363.0,
        355.8,
        364.4,
        200.77
    ],
    [
        "2023-06-19 00:00:00",
        359.6,
        357.2,
        350.4,
        360.0,
        200.81
    ],
    [
        "2023-06-20 00:00:00",
        354.0,
        350.0,
        347.2,
        359.2,
        200.84
    ],
    [
        "2023-06-21 00:00:00",
        341.6,
        340.4,
        337.0,
        346.0,
        200.87
    ],
    [
        "2023-06-23 00:00:00",
        340.0,
        337.0,
        333.0,
        340.8,
        200.91
    ],
    [
        "2023-06-26 00:00:00",
        335.6,
        332.8,
        330.2,
        339.4,
        200.94
    ],
    [
        "2023-06-27 00:00:00",
        332.8,
        341.4,
        332.8,
        344.4,
        200.97
    ],
    [
        "2023-06-28 00:00:00",
        340.0,
        336.2,
        333.8,
        341.0,
        201.0
    ],
    [
        "2023-06-29 00:00:00",
        339.0,
        333.6,
        331.2,
        339.0,
        201.04
    ],
    [
        "2023-06-30 00:00:00",
        331.0,
        331.6,
        329.4,
        333.8,
        201.07
    ],
    [
        "2023-07-03 00:00:00",
        331.8,
        338.0,
        331.8,
        340.0,
        201.1
    ],
    [
        "2023-07-04 00:00:00",
        336.4,
        339.2,
        336.2,
        341.2,
        201.13
    ],
    [
        "2023-07-05 00:00:00",
        339.8,
        335.4,
        333.2,
        341.0,
        201.16
    ],
    [
        "2023-07-06 00:00:00",
        332.2,
        326.8,
        325.4,
        337.0,
        201.19
    ],
    [
        "2023-07-07 00:00:00",
        323.2,
        326.6,
        320.0,
        331.6,
        201.22
    ],
    [
        "2023-07-10 00:00:00",
        333.8,
        328.8,
        327.4,
        335.8,
        201.25
    ],
    [
        "2023-07-11 00:00:00",
        332.6,
        333.8,
        330.2,
        335.6,
        201.29
    ],
    [
        "2023-07-12 00:00:00",
        338.6,
        340.0,
        335.8,
        341.0,
        201.32
    ],
    [
        "2023-07-13 00:00:00",
        350.0,
        349.8,
        347.0,
        350.6,
        201.35
    ],
    [
        "2023-07-14 00:00:00",
        354.8,
        352.6,
        348.8,
        354.8,
        201.39
    ],
    [
        "2023-07-18 00:00:00",
        351.8,
        336.4,
        335.0,
        351.8,
        201.42
    ],
    [
        "2023-07-19 00:00:00",
        330.6,
        333.0,
        327.0,
        333.8,
        201.45
    ],
    [
        "2023-07-20 00:00:00",
        336.0,
        332.8,
        330.6,
        341.8,
        201.48
    ],
    [
        "2023-07-21 00:00:00",
        332.8,
        333.0,
        331.0,
        337.4,
        201.51
    ],
    [
        "2023-07-24 00:00:00",
        328.6,
        325.0,
        323.8,
        331.0,
        201.54
    ],
    [
        "2023-07-25 00:00:00",
        337.0,
        345.0,
        335.0,
        345.6,
        201.58
    ],
    [
        "2023-07-26 00:00:00",
        344.8,
        341.0,
        338.2,
        344.8,
        201.61
    ],
    [
        "2023-07-27 00:00:00",
        346.0,
        343.8,
        340.4,
        346.4,
        201.64
    ],
    [
        "2023-07-28 00:00:00",
        343.8,
        350.4,
        338.6,
        352.0,
        201.67
    ],
    [
        "2023-07-31 00:00:00",
        360.0,
        354.4,
        350.8,
        363.0,
        201.71
    ],
    [
        "2023-08-01 00:00:00",
        356.0,
        354.0,
        347.2,
        361.0,
        201.74
    ],
    [
        "2023-08-02 00:00:00",
        351.6,
        343.4,
        340.2,
        352.4,
        201.78
    ],
    [
        "2023-08-03 00:00:00",
        342.0,
        342.2,
        339.0,
        347.8,
        201.81
    ],
    [
        "2023-08-04 00:00:00",
        348.6,
        343.4,
        339.2,
        350.6,
        201.84
    ],
    [
        "2023-08-07 00:00:00",
        340.2,
        341.2,
        338.0,
        341.8,
        201.87
    ],
    [
        "2023-08-08 00:00:00",
        334.4,
        334.8,
        333.4,
        337.2,
        201.9
    ],
    [
        "2023-08-09 00:00:00",
        333.0,
        337.2,
        332.0,
        338.2,
        201.94
    ],
    [
        "2023-08-10 00:00:00",
        337.2,
        339.8,
        335.6,
        341.6,
        201.97
    ],
    [
        "2023-08-11 00:00:00",
        338.8,
        335.8,
        334.6,
        341.6,
        202.0
    ],
    [
        "2023-08-14 00:00:00",
        328.0,
        333.2,
        327.8,
        334.4,
        202.03
    ],
    [
        "2023-08-15 00:00:00",
        331.2,
        332.6,
        330.6,
        335.0,
        202.06
    ],
    [
        "2023-08-16 00:00:00",
        329.8,
        328.8,
        327.6,
        331.0,
        202.09
    ],
    [
        "2023-08-17 00:00:00",
        320.6,
        332.8,
        320.6,
        335.8,
        202.12
    ],
    [
        "2023-08-18 00:00:00",
        329.4,
        325.0,
        325.0,
        332.8,
        202.15
    ],
    [
        "2023-08-21 00:00:00",
        321.0,
        318.0,
        318.0,
        325.8,
        202.18
    ],
    [
        "2023-08-22 00:00:00",
        318.2,
        319.0,
        314.4,
        324.6,
        202.21
    ],
    [
        "2023-08-23 00:00:00",
        320.0,
        318.0,
        317.0,
        321.4,
        202.24
    ],
    [
        "2023-08-24 00:00:00",
        321.0,
        325.2,
        321.0,
        328.0,
        202.27
    ],
    [
        "2023-08-25 00:00:00",
        322.6,
        320.0,
        320.0,
        323.8,
        202.3
    ],
    [
        "2023-08-28 00:00:00",
        330.6,
        325.2,
        324.8,
        333.6,
        202.33
    ],
    [
        "2023-08-29 00:00:00",
        325.4,
        329.4,
        325.4,
        332.0,
        202.36
    ],
    [
        "2023-08-30 00:00:00",
        333.8,
        325.8,
        325.0,
        334.0,
        202.39
    ],
    [
        "2023-08-31 00:00:00",
        331.0,
        325.0,
        322.0,
        331.8,
        202.42
    ],
    [
        "2023-09-04 00:00:00",
        330.0,
        333.4,
        328.4,
        334.6,
        202.45
    ],
    [
        "2023-09-05 00:00:00",
        332.0,
        329.0,
        327.4,
        335.0,
        202.48
    ],
    [
        "2023-09-06 00:00:00",
        329.0,
        327.6,
        323.2,
        329.0,
        202.51
    ],
    [
        "2023-09-07 00:00:00",
        326.6,
        321.6,
        320.2,
        327.2,
        202.54
    ]
])
stockCode = "HK.00700"
 
 //切割数组，把数组中的日期和数据分离，返回数组中的日期和数据
 function splitData(rawData) {
  var categoryData = [];
  var values = [];
  var rehabData = [];
   
  for (var i = 0; i < rawData.length; i++) {
  //splice 返回每组数组中被删除的第一项，即返回数组中被删除的日期 
  //alert(rawData[i].splice(0, 1)[0]);
  //categoryData 日期 把返回的日期放到categoryData[]数组中
  categoryData.push(rawData[i].splice(0, 1)[0]);
  //alert(categoryData);
  rehabData.push(rawData[i].splice(-1, 1)[0]);
  //数据数组，即数组中除日期外的数据
  // alert(rawData[i]);
  values.push(rawData[i])
  }
  return {
  categoryData: categoryData, //数组中的日期 x轴对应的日期                
  values: values,  //数组中的数据 y轴对应的数据
  rehabData: rehabData
  };
 }

 function updateChart(newData) {
    // 1. 更新 data0
    data0 = splitData(newData);

    // 2. 重新计算 MA
    var MA5 = calculateMA(5);
    var MA10 = calculateMA(10);
    var MA20 = calculateMA(20);
    var MA30 = calculateMA(30);

    // 3. 更新图表
    myChart.setOption({
        xAxis: {
            data: data0.categoryData
        },
        series: [
            {
                name: '日K',
                data: data0.values
            },
            {
                name: 'MA5',
                data: MA5
            },
            {
                name: 'MA10',
                data: MA10
            },
            {
                name: 'MA20',
                data: MA20
            },
            {
                name: 'MA30',
                data: MA30
            },
            {
                name: 'REHAB',
                data: data0.rehabData
            }
        ]
    });
}



 //计算MA平均线，N日移动平均线=N日收盘价之和/N dayCount要计算的天数(5,10,20,30)
 function calculateMA(dayCount) {
  var result = [];
  for (var i = 0, len = data0.values.length; i < len; i++) {
  if (i < dayCount) {
   result.push('-');
   //alert(result);
   continue; //结束单次循环，即不输出本次结果
  }
  var sum = 0;
  for (var j = 0; j < dayCount; j++) {
   //收盘价总和
   sum += data0.values[i - j][1];
   //alert(sum);
  }
  result.push(Number((sum / dayCount).toFixed(2)));
  // alert(result);
  }
  return result;
 }

 option = {
  title: { //标题
  text: stockCode,
  left: 0,
  top: 0
  },
  tooltip: { //提示框
  trigger: 'axis', //触发类型：坐标轴触发
  axisPointer: { //坐标轴指示器配置项
   type: 'cross' //指示器类型，十字准星
  }
  },
  legend: { //图例控件，点击图例控制哪些系列不现实
  data: ['日K', 'MA5', 'MA10', 'MA20', 'MA30', 'REHAB'],
  top: 25
  },
  grid: { //直角坐标系
  show:true,
  left: '10%', //grid组件离容器左侧的距离
  right: '10%',
  bottom: '15%',
  //backgroundColor:'#ccc'
  },
  xAxis: {
  type: 'category', //坐标轴类型，类目轴
  data: data0.categoryData,
  //scale: true, //只在数字轴中有效
  boundaryGap : false, //刻度作为分割线，标签和数据点会在两个刻度上
  axisLine: {onZero: false},
  splitLine: {show: false}, //是否显示坐标轴轴线
  //splitNumber: 20, //坐标轴的分割段数，预估值，在类目轴中无效
  min: 'dataMin', //特殊值，数轴上的最小值作为最小刻度
  max: 'dataMax' //特殊值，数轴上的最大值作为最大刻度
  },
  yAxis: {
  scale: true, //坐标刻度不强制包含零刻度
  position:'right',
  splitArea: {
   show: true //显示分割区域
  }
  },
  dataZoom: [ //用于区域缩放
  {
   filterMode:'filter', //当前数据窗口外的数据被过滤掉来达到数据窗口缩放的效果 默认值filter
   
   type: 'inside', //内置型数据区域缩放组件
   start: 50, //数据窗口范围的起始百分比
   end: 100 //数据窗口范围的结束百分比
  },
  {
   show: true,
   handleSize: 70,

   type: 'slider', //滑动条型数据区域缩放组件
   y: '90%',
   start: 50,
   end: 100,

   height: 50,
   brushSelect: false


  }
  ],
  series: [ //图表类型
  {
   name: '日K',
   type: 'candlestick', //K线图
   data: data0.values, //y轴对应的数据图标标注/
   itemStyle:{
    normal:{
     color0:'#ef232a',
     color:'#14b143',
     borderColor0:'#ef232a',
     borderColor:'#14b143'
    }
   },
   markPoint: { //图表标注
    symbol: 'none',
    symbolSize: 50,
    label: { //标注的文本
    normal: { //默认不显示标注
    show:true,
    //position:['20%','30%'],
    formatter: function (param) { //标签内容控制器
     return param != null ? Math.round(param.value) : '';
    }
    }
   },
   data: [ //标注的数据数组
    // {
    // name: 'XX标点',
    // coord: ['2013/5/31', 2300], //指定数据的坐标位置
    // value: 2300,
    // itemStyle: { //图形样式
    //  normal: {color: 'rgb(41,60,85)'}
    // }
    // },
    {
    name: 'highest value',
    type: 'max', //最大值
    valueDim: 'highest' //在highest维度上的最大值 最高价
    },
    {
    name: 'lowest value',
    type: 'min',
    valueDim: 'lowest' //最低价
    }
    //,
    // {
    // name: 'average value on close',
    // type: 'average',
    // valueDim: 'close' //收盘价
    // }
   ],
   tooltip: { //提示框
    formatter: function (param) {
    return param.name + '<br>' + (param.data.coord || '');
    }
   }
   }
 
  },
 
  { //MA5 5天内的收盘价之和/5
   name: 'MA5',
   type: 'line',
   data: calculateMA(5),
   smooth: true,
   lineStyle: {
   normal: {opacity: 0.5}
   }
  },
  {
   name: 'MA10',
   type: 'line',
   data: calculateMA(10),
   smooth: true,
   lineStyle: { //标线的样式
   normal: {opacity: 0.5}
   }
  },
  {
   name: 'MA20',
   type: 'line',
   data: calculateMA(20),
   smooth: true,
   lineStyle: {
   normal: {opacity: 0.5}
   }
  },
  {
   name: 'MA30',
   type: 'line',
   data: calculateMA(30),
   smooth: true,
   lineStyle: {
   normal: {opacity: 0.5}
   }
  },
  {
    name: 'REHAB',
    type: 'line',
    data: data0.rehabData,
    smooth: true,
    lineStyle: {
    normal: {opacity: 0.5}
    }

  },
  ]
 };
 myChart.setOption(option);
</script>

</html>
